#                           对象与类

## 4.1概述

#### 4.1.1 类

构造器与类同名 Date data = new Data( )；data只是引用了新构造的对象，data为对象变量。

可以将data = null，表示data没有引用任何对象。new Data（ ）的返回值是一个引用。

data可以理解为C++中的对象指针

## 4.3自定义类

一个源文件中只能有一个public类，可以有任意数目的非public类，文件名应该和public类名相同。

java中的对象都是在堆中构造的。

方法中的参数分为隐式参数和显式参数，对象为隐式参数，通常用关键字this来表示隐式参数，



![IMG20240117125836](C:\Users\21905\Downloads\IMG20240117125836.jpg)

上图可以理解为：Date d = harry.getHireDay( );

如果对d调用更改器方法会改变harry的私有类型状态。

所以这个时候应该使用克隆    

public Date getHarryDay( ){

​        return (Date) hireDay.clone( ); 

}

一个类的方法可以访问这个类的所有对象的私有字段。

被定义为final字段的变量，必须在构造对象时完成初始化，也就是说在调用构造器之后，这个值已经被设置。final字段被初始化后就不能更改。

对于可变类而言，使用final容易造成混淆，

![Screenshot_20240117_131630_Samsung Notes](C:\Users\21905\Downloads\Screenshot_20240117_131630_Samsung Notes.jpg)

## 4.4静态字段和静态方法

静态字段属于类，而不是对象，只有一个。静态字段被称为类字段，静态一词并无实际意义。

静态常量：public static final double PI = 3.1415926;对于字段而言，若使用public，常与final连用

静态方法，并不操作对象，可以访问静态字段，如果对象调用静态方法也不会报错

下面两种情况可以使用静态方法：

1.所有参数都是显式参数

2.方法只需访问静态字段

静态方法的常见用途是静态工厂。

可以在每个类中都写一个main函数，用作单元测试。

## 4.5方法参数

java采用按值调用  

![Screenshot_20240117_140930_Samsung Notes](C:\Users\21905\Downloads/Screenshot_20240117_140930_Samsung Notes.jpg)



![Screenshot_20240117_141005_Samsung Notes](C:\Users\21905\Downloads/Screenshot_20240117_141005_Samsung Notes.jpg)

方法得到是参数的副本，只不过之所以第二种能更改，是因为等到的是对象引用的副本，方法结束时，参数的副本就会被丢弃。

## 4.6对象构造

#### 重载（overloading）

如果有多个方法有相同的方法名，但参数不同，便出现了重载。注意，匹配函数时只看函数名和参数，不能出现返回值不同，但函数名和参数相同的情况。

//

如果调用构造器后没有为字段赋值，就会为其自动设置默认值，数值型为0，布尔型为false，对象引用为null，方法中的局部变量必须明确的初始化。静态字段同理。

如果写的类中没有构造器，就会提供一个无参数构造器，将所有的字段设置为默认值。如果有一个构造器，就不再提供无参数构造器。

![image-20240117143246547](C:\Users\21905\AppData\Roaming\Typora\typora-user-images\image-20240117143246547.png)

#### 初始化块

首先运行初始化块，然后再运行构造器。

在类第一次加载时，会完成静态字段初始化。所有的静态字段初始化方法以及静态初始化块都按照类声明中出现的顺序执行。

## 4.8包

使用包的主要原因是确保类名的唯一性。嵌套的包之间毫无关系，每一个包都是独立的类的集合。

类的导入：import语句位于package之后

import也可以导入静态方法和静态字段

import static java .lang.System.out;

如果没有指定public或private，这个部分（类，方法或变量）可以由同一个包中所有方法访问。

## 4.11类设计技巧

1.一定要保证数据私有

2.一定要初始化数据

3.不要在类中使用过多基本类型

4.不是所有的字段都需要单独的字段访问器和更改器。

5.分解有过多职责的类

6.类名和方法名要能体现出它们的职责

7.优先使用不可变的类

